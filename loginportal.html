<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VanaMala | Internal Portal</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
  body{
    font-family:Poppins,sans-serif;
    background:linear-gradient(135deg,#1a1a1a,#3d2b1f);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    color:#fff;
  }
  .card{
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(14px);
    padding:40px;
    border-radius:22px;
    width:380px;
    box-shadow:0 25px 50px rgba(0,0,0,.4);
  }
  h2{
    text-align:center;
    margin-bottom:25px;
    color:#d4a373;
  }
  input, textarea{
    width:100%;
    padding:14px;
    margin-bottom:18px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.2);
    background:rgba(255,255,255,.05);
    color:#fff;
    resize:none;
  }
  button{
    width:100%;
    padding:14px;
    border:none;
    border-radius:12px;
    background:#8d5d34;
    color:#fff;
    font-weight:600;
    cursor:pointer;
  }
  button:hover{background:#d4a373;color:#000;}
  .error{
    display:none;
    color:#ff6b6b;
    text-align:center;
    margin-top:12px;
  }
  #taskPage{display:none;}
  .task-box{
    margin-top:20px;
    background:rgba(0,0,0,.25);
    padding:18px;
    border-radius:14px;
    border-left:4px solid #d4a373;
  }
  a{
    display:block;
    text-align:center;
    margin-top:18px;
    text-decoration:none;
    color:#fff;
    font-size:.85rem;
  }
</style>
</head>

<body>

<div class="card" id="loginPage">
  <h2>VanaMala Portal</h2>
  <input id="empId" placeholder="Employee ID">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Access Dashboard</button>
  <div class="error" id="error">Wrong ID or Password</div>
</div>

<div class="card" id="taskPage">
  <h2 id="userName"></h2>
  <p id="userRole" style="color:#d4a373;font-size:.85rem;"></p>

  <div class="task-box" id="userTask"></div>

  <!-- NEW WORK ENTRY -->
  <textarea id="workDone" placeholder="Type your work done here..." rows="4"></textarea>
  <input id="hoursSpent" type="number" placeholder="Hours spent">
  <button onclick="submitWork()">Submit Work</button>

  <a href="https://instagram.com/vanamala.official" target="_blank">
    ðŸ“¸ DM your work to @vanamala.official
    Deadline : 3 Febraury 2026
  </a>

  <button style="margin-top:20px;background:transparent;border:1px solid rgba(255,255,255,.3);" onclick="location.reload()">Logout</button>
</div>

<script>
const webAppURL = "https://script.google.com/macros/s/AKfycbxeW_7cUgqB0KyjBvwPTmNYn72uolIeYe-BXyglXA6jQPh2m9zMzp0r41dhWrRu1tWD/exec";

const employees = {
  "VM-PH-01":{name:"Sai Gokul",role:"Head â€“ Photography & Visual Media",pass:"gokul@vm",
  task:"Research 3 NGOs with strong photography storytelling and summarize why their visuals work."},
  "VM-PH-02":{name:"Aditya Singathi",role:"Co-Head â€“ Photography & Visual Media",pass:"aditya@vm",
  task:"Study 2 social media brands and analyze their visual consistency."},
  "VM-FI-01":{name:"Jeevan Reddy",role:"Head â€“ Finance & Budgeting",pass:"jeevan@vm",
  task:"Research budgeting models suitable for student-led NGOs."},
  "VM-FI-02":{name:"Pralaksha Dash",role:"Finance & Budgeting",pass:"pralaksha@vm",
  task:"Analyze how NGOs manage funds transparently."},
  "VM-EV-01":{name:"Bavyesh Papetlla",role:"Head â€“ Event Management",pass:"bavyesh@vm",
  task:"Research 2 small exhibitions and note crowd flow strategies."},
  "VM-EV-02":{name:"Daiwik Paida",role:"Co-Head â€“ Event Management",pass:"daiwik@vm",
  task:"Find creative engagement ideas for school-level events."},
  "VM-SA-01":{name:"Ruhan Kanjani",role:"Head â€“ Sales & Stall Management",pass:"ruhan@vm",
  task:"Study pricing strategies for handmade products."},
  "VM-SA-02":{name:"Shreyas Bitra",role:"Co-Head â€“ Sales & Stall Management",pass:"shreyas@vm",
  task:"Analyze stall layouts that increase impulse buying."},
  "VM-TR-01":{name:"Nirvan Krivi",role:"Head â€“ Tribal Relations",pass:"nirvan@vm",
  task:"Research tribal communities near Telangana and their livelihoods."},
  "VM-TR-02":{name:"Aaditi Behera",role:"Co-Head â€“ Tribal Relations",pass:"aaditi@vm",
  task:"Study challenges faced by tribal artisans in marketing."},
  "VM-SM-01":{name:"Kanishka Kodicherla",role:"Head â€“ Social Media & Communications",pass:"kanishka@vm",
  task:"Analyze 3 Instagram pages doing social impact storytelling."},
  "VM-SM-02":{name:"Aanya Singh",role:"Co-Head â€“ Social Media & Communications",pass:"aanya@vm",
  task:"Study caption formats that improve engagement."},
  "VM-LO-01":{name:"Savya Kumar",role:"Head â€“ Logistics & Transport",pass:"savya@vm",
  task:"Research low-cost logistics models used by rural NGOs."}
};

function login(){
  const id=document.getElementById("empId").value.trim().toUpperCase();
  const pw=document.getElementById("password").value.trim();
  const user=employees[id];
  const err=document.getElementById("error");

  if(!user || user.pass!==pw){
    err.style.display="block";
    return;
  }

  document.getElementById("loginPage").style.display="none";
  document.getElementById("taskPage").style.display="block";

  document.getElementById("userName").innerText=user.name;
  document.getElementById("userRole").innerText=user.role;
  document.getElementById("userTask").innerText=user.task;
}

// --- Submit Work to Google Sheet ---
function submitWork(){
  const work = document.getElementById("workDone").value.trim();
  const hours = document.getElementById("hoursSpent").value.trim();

  if(!work || !hours){
    alert("Please enter both work done and hours spent!");
    return;
  }

  const empId = document.getElementById("empId").value.trim().toUpperCase();
  const user = employees[empId];

  fetch(webAppURL, {
    method: "POST",
    body: JSON.stringify({
      empId: empId,
      name: user.name,
      role: user.role,
      assignedTask: user.task,
      workDone: work,
      hours: hours
    })
  }).then(res=>res.json())
    .then(data=>{
      if(data.status==="success"){
        alert("Work submitted successfully!");
        location.reload(); // logs out employee
      } else {
        alert("Error submitting work, try again!");
      }
    }).catch(err=>{
      alert("Error: "+err);
    });
}
</script>

</body>
</html>
