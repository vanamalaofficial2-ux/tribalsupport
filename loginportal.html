<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VanaMala Portal 2026</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 24px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
        .hidden { display: none; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #007bff; border: none; color: white; cursor: pointer; border-radius: 8px; font-weight: bold; margin-top: 10px; }
        button:hover { background: #0056b3; }
        .ceo-btn { background: #343a40; }
        .task-box { background: #fff3cd; padding: 15px; border-radius: 8px; text-align: left; font-size: 14px; margin-bottom: 10px; border-left: 5px solid #ffc107; }
    </style>
</head>
<body>

    <div id="login-page" class="container">
        <h2>VanaMala Login</h2>
        <p>Enter your credentials to continue</p>
        <input type="text" id="empID" placeholder="Employee ID">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
    </div>

    <div id="emp-dashboard" class="container hidden">
        <h3 id="welcome-name"></h3>
        <p id="welcome-role" style="color:gray"></p>
        <div class="task-box">
            <strong>Monthly Task:</strong> Log work hours, AI usage, and task completion status.
        </div>
        <textarea id="work-done" placeholder="What did you do? (Include time spent and if AI was used)"></textarea>
        <button id="submitBtn" onclick="submitToSheet()" style="background:#28a745">SUBMIT & EXIT</button>
    </div>

    <div id="ceo-dashboard" class="container hidden">
        <h2>CEO Control</h2>
        <p>All data is being sent directly to your Google Sheet.</p>
        <button class="ceo-btn" onclick="window.open('https://docs.google.com')">OPEN GOOGLE SHEET</button>
        <button class="ceo-btn" onclick="location.reload()">LOGOUT</button>
    </div>

    <script>
        const employees = {
            "VM-PH-01": { name: "Sai Gokul", role: "Head – Photography", pass: "gokul@vm" },
            "VM-PH-02": { name: "Aditya Singathi", role: "Co-Head – Photography", pass: "aditya@vm" },
            "VM-FI-01": { name: "Jeevan Reddy", role: "Head – Finance", pass: "jeevan@vm" },
            "VM-FI-02": { name: "Pralaksha Dash", role: "Co-Head - Finance", pass: "pralaksha@vm" },
            "VM-EV-01": { name: "Bavyesh Papetlla", role: "Head – Event Management", pass: "bavyesh@vm" },
            "VM-EV-02": { name: "Daiwik Paida", role: "Co-Head – Event Management", pass: "daiwik@vm" },
            "VM-SA-01": { name: "Ruhan Kanjani", role: "Head – Sales", pass: "ruhan@vm" },
            "VM-SA-02": { name: "Shreyas Bitra", role: "Co-Head – Sales", pass: "shreyas@vm" },
            "VM-TR-01": { name: "Nirvan Krivi", role: "Head – Tribal Relations", pass: "nirvan@vm" },
            "VM-TR-02": { name: "Aaditi Behera", role: "Co-Head – Tribal Relations", pass: "aaditi@vm" },
            "VM-SM-01": { name: "Kanishka Kodicherla", role: "Head – Social Media", pass: "kanishka@vm" },
            "VM-SM-02": { name: "Aanya Singh", role: "Co-Head – Social Media", pass: "aanya@vm" },
            "VM-LO-01": { name: "Savya Kumar", role: "Head – Logistics", pass: "savya@vm" },
            "VM-CEO-01": { name: "Tinesh Reddy", role: "CEO", pass: "ceo@vm" }
        };

        let currentEmp = null;
        // The script URL you provided:
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwm8IZ1NGzvcyNdf3pzC2tY-nB55Fe7qXIZv2Rob3M30PEEx-NG3cI2dzPBGWFQ7Zdm/exec';

        function login() {
            const id = document.getElementById('empID').value;
            const pass = document.getElementById('password').value;
            if (employees[id] && employees[id].pass === pass) {
                currentEmp = { id, ...employees[id] };
                document.getElementById('login-page').classList.add('hidden');
                if(id === "VM-CEO-01") {
                    document.getElementById('ceo-dashboard').classList.remove('hidden');
                } else {
                    document.getElementById('emp-dashboard').classList.remove('hidden');
                    document.getElementById('welcome-name').innerText = "Hi, " + currentEmp.name;
                    document.getElementById('welcome-role').innerText = currentEmp.role;
                }
            } else { alert("Wrong ID or Password"); }
        }

        function submitToSheet() {
            const work = document.getElementById('work-done').value;
            if(!work) return alert("Enter work details!");
            
            const btn = document.getElementById('submitBtn');
            btn.innerText = "Sending...";
            btn.disabled = true;

            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    id: currentEmp.id,
                    name: currentEmp.name,
                    role: currentEmp.role,
                    work: work
                })
            }).then(() => {
                alert("Work Submitted to CEO!");
                location.reload();
            }).catch(err => {
                alert("Error! Check your internet.");
                btn.disabled = false;
                btn.innerText = "SUBMIT & EXIT";
            });
        }
    </script>
</body>
</html>
