<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VanaMala | Internal Portal</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:Poppins,sans-serif;
  background:linear-gradient(135deg,#1a1a1a,#3d2b1f);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}
.card{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(14px);
  padding:40px;
  border-radius:22px;
  width:380px;
  box-shadow:0 25px 50px rgba(0,0,0,.4);
}
h2{text-align:center;color:#d4a373}
input,textarea{
  width:100%;padding:14px;margin-bottom:18px;
  border-radius:12px;border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.05);color:#fff;
}
button{
  width:100%;padding:14px;border:none;border-radius:12px;
  background:#8d5d34;color:#fff;font-weight:600;cursor:pointer;
}
button:hover{background:#d4a373;color:#000}
.error{display:none;color:#ff6b6b;text-align:center}
#taskPage{display:none}
.task-box{
  background:rgba(0,0,0,.25);padding:18px;border-radius:14px;
  border-left:4px solid #d4a373;margin-bottom:20px;
}
</style>
</head>

<body>

<div class="card" id="loginPage">
  <h2>VanaMala Portal</h2>
  <input id="empId" placeholder="Employee ID">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Access Dashboard</button>
  <div class="error" id="error">Wrong ID or Password</div>
</div>

<div class="card" id="taskPage">
  <h2 id="userName"></h2>
  <p id="userRole" style="color:#d4a373;font-size:.85rem;"></p>
  <div class="task-box" id="userTask"></div>

  <textarea id="workDone" placeholder="Work done..."></textarea>
  <input id="hoursSpent" type="number" placeholder="Hours spent">
  <button onclick="submitWork()">Submit Work</button>

  <button style="margin-top:15px;background:transparent;border:1px solid #aaa"
    onclick="location.reload()">Logout</button>
</div>

<script>
const webAppURL =
"https://script.google.com/macros/s/AKfycbxA0GIpghtcblEEx2z713YV_qS8lOf930YQJauHJgNjTHZGjdWQUrOSY9zNqPctP5TE/exec";

const employees = {
  "VM-PH-01":{name:"Sai Gokul",role:"Head – Photography",pass:"gokul@vm",task:"Research NGO visuals"},
  "VM-PH-02":{name:"Aditya Singathi",role:"Co-Head – Photography",pass:"aditya@vm",task:"Visual branding study"},
  "VM-FI-01":{name:"Jeevan Reddy",role:"Head – Finance",pass:"jeevan@vm",task:"Budget models"},
  "VM-FI-02":{name:"Pralaksha Dash",role:"Finance",pass:"pralaksha@vm",task:"Transparency research"},
  "VM-EV-01":{name:"Bavyesh Papetlla",role:"Head – Events",pass:"bavyesh@vm",task:"Exhibition research"},
  "VM-EV-02":{name:"Daiwik Paida",role:"Co-Head – Events",pass:"daiwik@vm",task:"Engagement ideas"},
  "VM-SA-01":{name:"Ruhan Kanjani",role:"Head – Sales",pass:"ruhan@vm",task:"Pricing study"},
  "VM-SA-02":{name:"Shreyas Bitra",role:"Sales",pass:"shreyas@vm",task:"Stall layout"},
  "VM-TR-01":{name:"Nirvan Krivi",role:"Head – Tribal Relations",pass:"nirvan@vm",task:"Tribal research"},
  "VM-TR-02":{name:"Aaditi Behera",role:"Tribal Relations",pass:"aaditi@vm",task:"Artisan challenges"},
  "VM-SM-01":{name:"Kanishka Kodicherla",role:"Head – Social Media",pass:"kanishka@vm",task:"Instagram analysis"},
  "VM-SM-02":{name:"Aanya Singh",role:"Social Media",pass:"aanya@vm",task:"Caption study"},
  "VM-LO-01":{name:"Savya Kumar",role:"Head – Logistics",pass:"savya@vm",task:"Logistics models"},

  /* CEO — YOU */
  "VM-CEO-01":{name:"Tinesh Reddy",role:"Founder & CEO",pass:"ceo@vm",
  task:"Review all departments & performance"}
};

function login(){
  const id=empId.value.trim().toUpperCase();
  const pw=password.value.trim();
  const user=employees[id];
  if(!user || user.pass!==pw){
    error.style.display="block";return;
  }
  loginPage.style.display="none";
  taskPage.style.display="block";
  userName.innerText=user.name;
  userRole.innerText=user.role;
  userTask.innerText=user.task;
}

function submitWork(){
  const empIdVal=empId.value.trim().toUpperCase();
  const u=employees[empIdVal];
  fetch(webAppURL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      empId:empIdVal,
      name:u.name,
      role:u.role,
      task:u.task,
      workDone:workDone.value,
      hours:hoursSpent.value
    })
  })
  .then(r=>r.json())
  .then(()=>{alert("Submitted");location.reload()})
  .catch(()=>alert("Submit failed"));
}
</script>
</body>
</html>
