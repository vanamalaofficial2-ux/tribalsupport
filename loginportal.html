<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VanaMala Internal Portal</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#1c1c1c;
  padding:25px;
  width:360px;
  border-radius:10px;
}
input,textarea,button{
  width:100%;
  margin:8px 0;
  padding:10px;
}
button{
  background:#c08b3e;
  border:none;
  font-weight:bold;
  cursor:pointer;
}
#error{color:red;display:none;}
#taskPage{display:none;}
</style>
</head>

<body>

<div class="card" id="loginPage">
  <h3>VanaMala Login</h3>
  <input id="empId" placeholder="Employee ID">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div id="error">Wrong ID or Password</div>
</div>

<div class="card" id="taskPage">
  <h3 id="name"></h3>
  <p id="role"></p>
  <b>Assigned Task:</b>
  <p id="task"></p>

  <textarea id="workDone" placeholder="Work done"></textarea>
  <input id="hours" placeholder="Time spent (hrs)">
  <button onclick="submitWork()">Submit Work</button>

  <button onclick="location.reload()">Logout</button>
</div>

<script>
/* ✅ YOUR DEPLOYED APPS SCRIPT URL */
const WEB_APP_URL =
"https://script.google.com/macros/s/AKfycbxA0GIpghtcblEEx2z713YV_qS8lOf930YQJauHJgNjTHZGjdWQUrOSY9zNqPctP5TE/exec";

/* ✅ ALL IDS + PASSWORDS (INCLUDING CEO) */
const employees = {
  "VM-CEO-01":{name:"Tinesh Reddy",role:"Founder & CEO",pass:"ceo@vm",
    task:"Review team submissions and prepare weekly summary."},

  "VM-PH-01":{name:"Sai Gokul",role:"Head – Photography",pass:"gokul@vm",
    task:"Upload 5 raw artisan photos and label them."},

  "VM-PH-02":{name:"Aditya Singathi",role:"Co-Head – Photography",pass:"aditya@vm",
    task:"Edit 3 photos for Instagram post."},

  "VM-FI-01":{name:"Jeevan Reddy",role:"Head – Finance",pass:"jeevan@vm",
    task:"Prepare basic expense list for January."},

  "VM-FI-02":{name:"Pralaksha Dash",role:"Finance Team",pass:"pralaksha@vm",
    task:"Check pricing consistency of products."},

  "VM-EV-01":{name:"Bavyesh Papetlla",role:"Head – Events",pass:"bavyesh@vm",
    task:"List materials needed for next stall."},

  "VM-EV-02":{name:"Daiwik Paida",role:"Event Team",pass:"daiwik@vm",
    task:"Design simple stall layout on paper."},

  "VM-SA-01":{name:"Ruhan Kanjani",role:"Head – Sales",pass:"ruhan@vm",
    task:"Note customer feedback from last sale."},

  "VM-SA-02":{name:"Shreyas Bitra",role:"Sales Team",pass:"shreyas@vm",
    task:"Track top 5 selling products."},

  "VM-TR-01":{name:"Nirvan Krivi",role:"Head – Tribal Relations",pass:"nirvan@vm",
    task:"Collect artisan contact details."},

  "VM-TR-02":{name:"Aaditi Behera",role:"Tribal Relations",pass:"aaditi@vm",
    task:"Write 3 issues faced by artisans."},

  "VM-SM-01":{name:"Kanishka Kodicherla",role:"Head – Social Media",pass:"kanishka@vm",
    task:"Draft captions for 2 posts."},

  "VM-SM-02":{name:"Aanya Singh",role:"Social Media Team",pass:"aanya@vm",
    task:"Find best posting time insights."},

  "VM-LO-01":{name:"Savya Kumar",role:"Logistics Head",pass:"savya@vm",
    task:"List transport costs from village."}
};

let currentUser=null;

function login(){
  const id=empId.value.trim().toUpperCase();
  const pw=password.value.trim();
  if(!employees[id] || employees[id].pass!==pw){
    error.style.display="block";return;
  }
  currentUser=employees[id];
  loginPage.style.display="none";
  taskPage.style.display="block";
  name.innerText=currentUser.name;
  role.innerText=currentUser.role;
  task.innerText=currentUser.task;
}

function submitWork(){
  fetch(WEB_APP_URL,{
    method:"POST",
    body:JSON.stringify({
      empId:empId.value.toUpperCase(),
      name:currentUser.name,
      role:currentUser.role,
      assignedTask:currentUser.task,
      workDone:workDone.value,
      hours:hours.value
    })
  })
  .then(r=>r.json())
  .then(()=>{alert("Submitted ✅");location.reload();});
}
</script>

</body>
</html>
